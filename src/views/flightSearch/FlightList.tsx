"use client";
import React, { useEffect, useState } from "react";
import { Button, Divider, Drawer, Tooltip } from "@mui/material";
import { useGetFlightsQuery } from "@/redux-store/api/flightApi";
import FlightCard from "./FlightList/FlightCard";
import { useAppSelector } from "@/hooks/hooks";
import EmptyStat from "@/components/EmptyStat/EmptyStat";
import Loader from "@/components/Spinner/Loader";

const FlightList: React.FC = () => {
    const { originLocation, destination, adults, datesArr } = useAppSelector((state) => state.search);
    const departureDate = datesArr[0];
    const returnDate = datesArr[1] || "";

    const { data, isLoading, error } = useGetFlightsQuery(
        {
            originLocationCode: originLocation.locationCode,
            destinationLocationCode: destination.locationCode,
            adults,
            departureDate,
            returnDate,
            max: 5,
        },
        { refetchOnMountOrArgChange: true }
    );

    // airlines name 
    const getCarrierFullName = (carrierCode: any) => {
        if (data?.flight_data?.dictionaries?.carriers[carrierCode]) {
            return data?.flight_data?.dictionaries?.carriers[carrierCode];
        } else {
            return carrierCode;
        }
    }


    // findLowestPrice

    const findLowestPrice = () => {
        let lowestPrice = Infinity;

        data?.flight_data?.data?.forEach((offer: any) => {
            const price = parseFloat(offer.price.grandTotal);
            if (price < lowestPrice) {
                lowestPrice = price;
            }
        });
        return lowestPrice === Infinity ? 'NA' : lowestPrice.toFixed(2);
    };

    const lowestPrice = findLowestPrice();

    // findShortestDuration
    const parseDuration = (duration: string): number => {
        const match = duration.match(/PT(\d+H)?(\d+M)?/);
        if (!match) return Infinity;

        const hours = parseInt(match[1] || '0', 10);
        const minutes = parseInt(match[2] || '0', 10);
        return hours * 60 + minutes;
    };

    const formatDuration = (totalMinutes: number): string => {
        const hours = Math.floor(totalMinutes / 60);
        const minutes = totalMinutes % 60;
        return `${hours} hr ${minutes} min`;
    };

    const findShortestDuration = () => {
        let shortestDuration = Infinity;
        let shortestDurationFormatted = '';

        data?.flight_data?.data?.forEach((offer: any) => {
            offer.itineraries.forEach((itinerary: any) => {
                const duration = parseDuration(itinerary.duration);
                if (duration < shortestDuration) {
                    shortestDuration = duration;
                    shortestDurationFormatted = itinerary.duration;
                }
            });
        });

        return shortestDurationFormatted === '' ? 'NA' : formatDuration(shortestDuration);
    };

    const shortestDuration = findShortestDuration();


    return (
        <>
            {isLoading ? (
                <Loader />
            ) : (
                <div className="">
                    <div className="text-center">
                        <h1 className="text-[26px] font-medium mb-2">Flights from Dhaka to Bangkok</h1>
                        <p className="text-sm font-normal">
                            <span className="font-semibold">{data?.flight_data?.meta?.count}</span> Available Flights
                        </p>
                    </div>

                    <div className="mt-10 flex justify-between items-center gap-2">
                        <button className="px-2 py-3 bg-white rounded-[7px] border border-[#4F4F4F] flex items-center justify-between gap-1 w-[75px] h-[36px]">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="7"
                                height="12"
                                viewBox="0 0 7 12"
                                fill="none">
                                <path
                                    d="M6.55016 11.4847C6.71188 11.3229 6.80273 11.1035 6.80273 10.8748C6.80273 10.646 6.71188 10.4267 6.55016 10.2649L2.28005 5.99477L6.55016 1.72466C6.7073 1.56196 6.79425 1.34405 6.79229 1.11787C6.79032 0.891683 6.6996 0.67532 6.53965 0.515377C6.37971 0.355434 6.16335 0.264712 5.93716 0.262747C5.71098 0.260781 5.49307 0.347731 5.33038 0.504869L0.450367 5.38488C0.288646 5.54665 0.197795 5.76603 0.197795 5.99477C0.197795 6.22351 0.288646 6.44289 0.450367 6.60466L5.33038 11.4847C5.49215 11.6464 5.71153 11.7372 5.94027 11.7372C6.16901 11.7372 6.38839 11.6464 6.55016 11.4847Z"
                                    fill="#254FD4"
                                />
                            </svg>
                            <p className="text-[12px]">Previous</p>
                        </button>
                        <div className="flex h-[36px]">
                            <button className="px-4 py-3 bg-[#B9CAFF] rounded-s-[7px] ">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="7"
                                    height="12"
                                    viewBox="0 0 7 12"
                                    fill="none">
                                    <path
                                        d="M6.35241 11.2219C6.51413 11.0601 6.60498 10.8408 6.60498 10.612C6.60498 10.3833 6.51413 10.1639 6.35241 10.0021L2.08229 5.73201L6.35241 1.4619C6.50955 1.2992 6.5965 1.08129 6.59453 0.85511C6.59257 0.628926 6.50184 0.412563 6.3419 0.252621C6.18196 0.0926781 5.96559 0.00195599 5.73941 -9.53674e-06C5.51323 -0.00197506 5.29532 0.0849743 5.13262 0.242113L0.252614 5.12212C0.0908918 5.28389 4.14848e-05 5.50327 4.14848e-05 5.73201C4.14848e-05 5.96076 0.0908918 6.18014 0.252614 6.34191L5.13262 11.2219C5.29439 11.3836 5.51377 11.4745 5.74252 11.4745C5.97126 11.4745 6.19064 11.3836 6.35241 11.2219Z"
                                        fill="#254FD4"
                                    />
                                </svg>
                            </button>

                            <div className=" flex justify-between items-center bg-[#D3D9EA]">
                                <div className="flex items-center justify-center gap-2 w-[124px] h-[36px] border-r">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="38"
                                        height="15"
                                        viewBox="0 0 38 15"
                                        fill="none">
                                        <path
                                            d="M19.7201 4.17914C19.98 1.7104 4.34976 4.01653 4.34976 4.01653C17.2906 -0.737651 37.7869 1.10607 37.7869 1.10607C37.7869 1.10607 17.2759 10.4814 0 14.2457C0 14.2457 3.77215 13.1074 10.0103 10.0846C10.0103 10.0846 19.2999 5.68404 19.7201 4.17914Z"
                                            fill="url(#paint0_linear_211_3544)"
                                        />
                                        <path
                                            d="M0.0859375 14.1009C18.7864 5.60606 17.9789 4.43585 17.9789 4.43585C18.0555 3.05158 4.21939 4.43585 4.21939 4.43585C4.21939 4.43585 11.1254 4.51272 10.876 6.60598C10.8743 6.60598 11.4825 8.35036 0.0859375 14.1009Z"
                                            fill="url(#paint1_linear_211_3544)"
                                        />
                                        <path
                                            d="M19.6792 4.28507C19.6962 4.25138 19.71 4.21613 19.7204 4.17981C19.9804 1.71107 4.3501 4.0172 4.3501 4.0172C4.3501 4.0172 17.7972 2.40113 19.6792 4.28507Z"
                                            fill="url(#paint2_linear_211_3544)"
                                        />
                                        <path
                                            d="M0.00244141 14.2457C0.00244141 14.2457 20.985 12.4002 37.7894 1.10611C37.7876 1.10611 17.2759 10.4814 0.00244141 14.2457Z"
                                            fill="url(#paint3_linear_211_3544)"
                                        />
                                        <path
                                            d="M0.00244141 14.2457C0.00244141 14.2457 0.15745 14.199 0.456275 14.0997L0.00244141 14.2457Z"
                                            stroke="#231F20"
                                            stroke-width="0.162908"
                                            stroke-miterlimit="10"
                                        />
                                        <path
                                            d="M0.0859375 14.1009C0.0859375 14.1009 16.2478 7.81819 17.8822 4.66647C17.4036 5.29386 14.7113 7.45689 0.0859375 14.1009Z"
                                            fill="url(#paint4_linear_211_3544)"
                                        />
                                        <path
                                            d="M10.8799 6.48943C10.8634 4.50971 4.21973 4.43579 4.21973 4.43579C4.21973 4.43579 9.12293 4.69242 10.8799 6.48943Z"
                                            fill="url(#paint5_linear_211_3544)"
                                        />
                                        <path
                                            d="M6.92905 8.62423C8.53319 8.2886 9.69913 7.36965 9.53325 6.57169C9.36738 5.77372 7.93251 5.39893 6.32837 5.73455C4.72424 6.07018 3.55829 6.98913 3.72417 7.78709C3.89004 8.58506 5.32492 8.95985 6.92905 8.62423Z"
                                            fill="url(#paint6_linear_211_3544)"
                                        />
                                        <path
                                            d="M9.54977 6.68572C9.54977 6.67685 9.54623 6.66857 9.54388 6.6597C9.6093 7.4361 8.47117 8.30001 6.92695 8.62287C5.32378 8.95637 3.89155 8.58384 3.72298 7.78556C3.71072 7.72588 3.70577 7.66492 3.70824 7.60403C3.69799 7.70455 3.70316 7.80606 3.72357 7.90501C3.91336 8.81859 5.37389 9.28632 6.98117 8.94986C8.58846 8.61341 9.74073 7.5993 9.54977 6.68572Z"
                                            fill="#871919"
                                        />
                                        <path
                                            d="M21.7348 6.83412L21.4384 6.60883L21.0995 6.7608L21.2215 6.40897L20.9722 6.13223L21.3441 6.13992L21.5291 5.81647L21.637 6.17362L22.0001 6.25049L21.6948 6.46337L21.7348 6.83412Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M18.6039 2.63109L18.308 2.4058L17.9685 2.55777L18.0905 2.20593L17.8418 1.9292L18.2137 1.93688L18.3988 1.61343L18.506 1.97059L18.8697 2.04746L18.5644 2.26033L18.6039 2.63109Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M16.5487 8.63112L16.2528 8.40583L15.9133 8.5578L16.0353 8.20596L15.7866 7.92923L16.1579 7.93691L16.3436 7.61346L16.4509 7.97062L16.8145 8.04749L16.5092 8.26036L16.5487 8.63112Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M22.4939 4.12169L22.234 3.87511L21.8939 3.98568L22.0471 3.66164L21.8379 3.37131L22.1921 3.41743L22.4025 3.12769L22.4685 3.48011L22.808 3.59128L22.4945 3.76335L22.4939 4.12169Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M23.9952 2.23728L23.7081 2.02322L23.3834 2.17342L23.4977 1.83341L23.2549 1.56968L23.6126 1.57382L23.7877 1.26102L23.8944 1.6028L24.2451 1.67316L23.9533 1.88072L23.9952 2.23728Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M29.0723 4.237L28.7853 4.02295L28.4605 4.17314L28.5743 3.83314L28.332 3.57L28.6898 3.57355L28.8643 3.26074L28.9715 3.60311L29.3216 3.67289L29.0305 3.88103L29.0723 4.237Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M25.7461 5.43572L25.4874 5.18796L25.1473 5.29617L25.3023 4.97332L25.0942 4.6818L25.4485 4.72969L25.6607 4.44113L25.7243 4.79415L26.0632 4.90768L25.7485 5.07739L25.7461 5.43572Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M28.2847 2.24621L28.0265 1.99845L27.6859 2.10666L27.8409 1.7838L27.6328 1.49169L27.987 1.54018L28.1998 1.25162L28.2635 1.60463L28.6024 1.71817L28.287 1.88787L28.2847 2.24621Z"
                                            fill="white"
                                        />
                                        <path
                                            d="M32.6513 1.99459L32.3931 1.74683L32.0525 1.85504L32.2075 1.53218L32 1.24007L32.3542 1.28856L32.5664 1L32.6301 1.35302L32.969 1.46655L32.6542 1.63626L32.6513 1.99459Z"
                                            fill="white"
                                        />
                                        <defs>
                                            <linearGradient
                                                id="paint0_linear_211_3544"
                                                x1="1.3008"
                                                y1="7.86895"
                                                x2="37.684"
                                                y2="6.75096"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#05508C" />
                                                <stop
                                                    offset="0.5"
                                                    stop-color="#0095DB"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#05508C"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint1_linear_211_3544"
                                                x1="5.8644"
                                                y1="8.79385"
                                                x2="17.8581"
                                                y2="7.2721"
                                                gradientUnits="userSpaceOnUse">
                                                <stop
                                                    offset="0.01"
                                                    stop-color="#009756"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#008C4F"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint2_linear_211_3544"
                                                x1="2.82768"
                                                y1="3.47378"
                                                x2="21.4256"
                                                y2="3.70643"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#141E4B" />
                                                <stop
                                                    offset="0.5"
                                                    stop-color="#1E468C"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#141E4B"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint3_linear_211_3544"
                                                x1="1.36985"
                                                y1="14.377"
                                                x2="35.2228"
                                                y2="3.42478"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#141E4B" />
                                                <stop
                                                    offset="0.5"
                                                    stop-color="#1E468C"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#141E4B"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint4_linear_211_3544"
                                                x1="0.501463"
                                                y1="14.1642"
                                                x2="20.8071"
                                                y2="3.77986"
                                                gradientUnits="userSpaceOnUse">
                                                <stop
                                                    offset="0.01"
                                                    stop-color="#008C41"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#0A4B23"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint5_linear_211_3544"
                                                x1="5.40442"
                                                y1="4.20222"
                                                x2="12.7625"
                                                y2="7.27893"
                                                gradientUnits="userSpaceOnUse">
                                                <stop
                                                    offset="0.01"
                                                    stop-color="#008C41"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#0A4B23"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint6_linear_211_3544"
                                                x1="3.70854"
                                                y1="7.17741"
                                                x2="9.54889"
                                                y2="7.17741"
                                                gradientUnits="userSpaceOnUse">
                                                <stop
                                                    offset="0.01"
                                                    stop-color="#F61423"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#AC1E23"
                                                />
                                            </linearGradient>
                                        </defs>
                                    </svg>

                                    <div>
                                        <p className="text-[8px]">BS - 6</p>
                                        <p className="text-[8px]">BDT 2,23,000</p>
                                    </div>
                                </div>

                                <div className="flex  items-center justify-center gap-2 w-[124px] h-[36px] border-r">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="47"
                                        height="13"
                                        viewBox="0 0 47 13"
                                        fill="none">
                                        <path
                                            d="M46.9849 4.38296C44.5355 3.87845 42.2279 3.42189 39.7364 3.71865C35.0703 4.25741 35.968 12.5669 30.3998 12.9664C26.9085 13.2153 22.6237 11.2383 19.1768 10.5603C20.8925 10.8982 22.3976 8.40989 23.1823 7.2251C24.3726 5.42622 25.2394 3.39449 26.9107 1.97456C27.8621 1.19152 29.0623 0.800935 30.2778 0.8788C32.2174 1.01349 34.1304 1.53398 36.0235 1.96315C38.116 2.44255 40.2041 2.86259 42.3055 3.31231C43.8572 3.64789 45.4221 4.04053 46.9827 4.34872"
                                            fill="url(#paint0_linear_211_3570)"
                                        />
                                        <path
                                            d="M4.35174 0.547755C7.93166 -0.74205 11.6668 0.486118 14.8721 2.22793C16.4724 3.12213 18.0154 4.12101 19.4916 5.21845C20.5401 5.97635 22.544 7.46248 22.544 7.46248C22.1295 8.10691 21.6591 8.71129 21.1386 9.26821C20.3916 10.0238 19.7509 10.2772 19.1325 10.2955C19.0128 10.2955 18.8931 10.2955 18.7734 10.2955C17.4124 10.2453 16.0713 9.66314 14.5041 8.6975C10.7912 6.41466 4.35395 -2.59343 0.539062 3.77569C1.39888 2.26886 2.7499 1.12505 4.35174 0.547755Z"
                                            fill="url(#paint1_linear_211_3570)"
                                        />
                                        <defs>
                                            <linearGradient
                                                id="paint0_linear_211_3570"
                                                x1="42.5847"
                                                y1="12.6258"
                                                x2="23.3791"
                                                y2="2.65568"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#F69220" />
                                                <stop
                                                    offset="1"
                                                    stop-color="#ED3229"
                                                />
                                            </linearGradient>
                                            <linearGradient
                                                id="paint1_linear_211_3570"
                                                x1="22.3405"
                                                y1="8.30455"
                                                x2="1.4662"
                                                y2="1.19445"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#15467A" />
                                                <stop
                                                    offset="0.16"
                                                    stop-color="#106291"
                                                />
                                                <stop
                                                    offset="0.41"
                                                    stop-color="#0987B1"
                                                />
                                                <stop
                                                    offset="0.64"
                                                    stop-color="#04A3C7"
                                                />
                                                <stop
                                                    offset="0.84"
                                                    stop-color="#01B3D5"
                                                />
                                                <stop
                                                    offset="1"
                                                    stop-color="#00B9DA"
                                                />
                                            </linearGradient>
                                        </defs>
                                    </svg>

                                    <div>
                                        <p className="text-[8px]">BS - 6</p>
                                        <p className="text-[8px]">BDT 2,23,000</p>
                                    </div>
                                </div>
                                <div className="flex  items-center justify-center gap-2 w-[124px] h-[36px] border-r">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="27"
                                        height="23"
                                        viewBox="0 0 27 23"
                                        fill="none">
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M7.65848 4.06017L14.0645 3.67729C10.681 3.56212 8.67324 3.56212 8.04135 3.6306L7.10752 3.83293C6.99234 3.94499 7.19778 4.01348 7.67093 4.06017H7.65848Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M6.2359 5.66056L16.7695 5.43332L6.57518 5.07536C5.22113 4.98509 4.47718 5.07536 4.36512 5.32126C4.16279 5.66056 4.81648 5.77262 6.23278 5.66056H6.2359Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M2.51655 7.68691L18.4166 7.1235L4.09784 6.94296C3.01459 6.94296 2.45117 7.05502 2.45117 7.28225L2.51966 7.68691H2.51655Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M3.57486 9.80962L19.5434 9.08746L2.26128 8.81665C1.80993 8.86334 1.5609 8.9754 1.51733 9.20263C1.44885 9.69756 2.13989 9.8781 3.59044 9.80962H3.57486Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M1.27483 11.6366L20.1756 11.1635L2.69736 10.6686C1.56743 10.6686 0.982213 10.8491 0.891943 11.2756C0.870153 11.4561 1.00402 11.6149 1.27483 11.6366Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M1.11862 13.5543L7.09514 13.4858L7.92935 12.5519H1.94972C1.04702 12.5519 0.639241 12.7543 0.754413 13.1745C0.751656 13.2753 0.787513 13.3733 0.854632 13.4485C0.92175 13.5237 1.01507 13.5705 1.1155 13.5792L1.11862 13.5543Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M2.44822 15.562L6.23647 15.2912L6.7345 14.4352L2.28948 14.5005C1.43347 14.5005 1.00391 14.6811 1.00391 15.0204C1.00391 15.2912 1.11908 15.4499 1.31518 15.4717L2.442 15.562H2.44822Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M3.03311 17.3675L12.664 16.9815L11.9885 16.306L2.69695 16.3745L1.72576 16.4865C1.66551 16.5382 1.62247 16.607 1.60244 16.6838C1.58241 16.7606 1.58634 16.8416 1.61369 16.9161C1.68217 17.3208 2.1771 17.4795 3.03311 17.3675Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M13.9498 18.5627L4.36558 18.4942C3.19207 18.4942 2.67224 18.6281 2.69714 18.9674C2.8092 19.3969 3.46287 19.509 4.70486 19.3969L14.5381 19.1697L13.9498 18.5627Z"
                                            fill="#808285"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M15.1445 20.5238L4.83814 20.4491C4.61402 20.4491 4.50195 20.5394 4.50195 20.7199C4.50195 21.0592 5.221 21.2149 6.64354 21.1246L16.1593 20.7884L15.1445 20.5394V20.5238Z"
                                            fill="#93989C"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M8.65106 22.5098L14.2883 22.3292L8.37402 22.102C7.58338 21.9899 7.17871 22.0584 7.17871 22.3292L8.64483 22.5098H8.65106Z"
                                            fill="#93989C"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M24.6723 1.37419C22.621 2.2551 18.6304 4.57723 12.7193 8.41216C15.4243 6.87921 18.2447 5.55954 21.1549 4.46517L25.7805 2.93057L26.68 2.99906C26.8606 3.11111 26.5898 3.26987 25.9579 3.45041C24.8778 3.7897 22.87 4.62392 19.9378 5.97486C16.5542 7.50945 14.615 8.5927 14.0516 9.26817L17.9519 9.35844C17.7158 9.68276 17.412 9.95182 17.0615 10.1469C16.7111 10.3421 16.3224 10.4586 15.9223 10.4884L15.1784 10.5102C16.0375 11.9078 17.4351 12.6891 19.3495 12.8105L20.66 12.879L20.7284 13.8937L15.2469 14.4354L20.5386 14.7715C20.607 15.5622 20.5853 15.9668 20.4732 15.9668H15.1255L20.0436 16.689L19.751 17.9528L15.334 18.2921L19.281 18.7185L18.3472 19.9823L15.9348 20.2936L17.8024 20.6982L15.748 22.1177C14.5806 20.9795 13.4878 19.7671 12.4765 18.4882L11.0353 16.4804L9.04935 16.91C10.7863 15.6649 11.7108 14.7311 11.8695 14.1583C11.866 13.416 11.7899 12.6758 11.6423 11.9483L10.9201 12.6922C10.8081 11.609 10.6275 10.9335 10.447 10.6627L10.1762 11.4969L8.98397 12.5335L9.83998 12.465C9.32015 15.3536 8.14664 17.2026 6.29765 17.9466L5.21442 16.8197L5.95837 16.1412L4.83155 16.4804L4.60742 16.1412C5.71245 14.3171 6.56847 13.0284 7.24395 12.2844L10.5155 9.30863C12.1475 7.92385 13.865 6.64301 15.6577 5.4737C19.832 2.94614 22.8545 1.34618 24.6848 0.670707C25.4069 0.399896 25.6995 0.443472 25.519 0.736072L24.6848 1.35863L24.6723 1.37419Z"
                                            fill="#7A003C"
                                        />
                                    </svg>

                                    <div>
                                        <p className="text-[8px]">BS - 6</p>
                                        <p className="text-[8px]">BDT 2,23,000</p>
                                    </div>
                                </div>
                                <div className="flex  items-center justify-center gap-2 w-[124px] h-[36px] border-r">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="22"
                                        height="23"
                                        viewBox="0 0 22 23"
                                        fill="none">
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M3.50316 4.06463C4.46347 3.09246 5.60183 2.31411 6.85619 1.77199C8.14256 1.23078 9.52408 0.951996 10.9197 0.951996C12.3152 0.951996 13.6968 1.23078 14.9831 1.77199C16.251 2.31425 17.4045 3.09223 18.3823 4.06463C19.3249 5.02513 20.0646 6.16542 20.5575 7.41767C21.0903 8.71975 21.3609 10.1141 21.3539 11.521C21.3528 12.9257 21.0825 14.3171 20.5575 15.62C20.0543 16.8669 19.3158 18.0053 18.3823 18.9731C17.4151 19.949 16.2583 20.7164 14.9831 21.228C13.6968 21.7692 12.3152 22.048 10.9197 22.048C9.52408 22.048 8.14256 21.7692 6.85619 21.228C4.33525 20.1674 2.33285 18.1575 1.28177 15.6326C0.758772 14.3291 0.488508 12.938 0.485417 11.5335C0.480509 10.1269 0.751056 8.73292 1.28177 7.43024C1.77554 6.16537 2.53606 5.02174 3.51155 4.0772L3.50316 4.06463ZM13.382 11.1563L14.4424 12.1832C14.6055 12.3222 14.8128 12.3986 15.0271 12.3986C15.2414 12.3986 15.4487 12.3222 15.6118 12.1832L18.0008 10.5863L17.3638 10.0121H20.7629L15.7334 13.6166C15.0963 13.9687 14.673 14.0064 14.2999 13.7004C14.102 13.5303 13.8887 13.3787 13.6629 13.2478C13.3443 12.7993 12.8665 12.7364 12.2839 13.0424L9.14882 15.3602H3.5786L8.88896 11.3617L1.13506 11.4036L2.19967 10.3809H12.0199C12.5522 10.3181 12.9755 10.5863 13.403 11.1563H13.382Z"
                                            fill="#D84638"
                                        />
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M13.3818 11.1564L14.4421 12.1833C14.6052 12.3223 14.8125 12.3987 15.0268 12.3987C15.2411 12.3987 15.4484 12.3223 15.6115 12.1833L18.0005 10.5864L17.3635 10.0122H20.7626L15.7331 13.6167C15.096 13.9688 14.6727 14.0065 14.2996 13.7005C14.1017 13.5304 13.8884 13.3788 13.6626 13.2479C13.344 12.7994 12.8662 12.7365 12.2836 13.0425L9.14853 15.3603H3.5783L8.88867 11.3618L1.13477 11.4037L2.19937 10.381H12.0196C12.5519 10.3181 12.9752 10.5864 13.4027 11.1564H13.3818Z"
                                            fill="white"
                                        />
                                    </svg>

                                    <div>
                                        <p className="text-[8px]">BS - 6</p>
                                        <p className="text-[8px]">BDT 2,23,000</p>
                                    </div>
                                </div>
                                <div className="pl-2 flex items-center justify-center h-[36px]">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="24"
                                        height="29"
                                        viewBox="0 0 24 29"
                                        fill="none">
                                        <path
                                            d="M14.9823 2.52381C14.5121 3.13036 14.2557 3.87533 14.2529 4.64276V11.2951C14.2181 11.7988 14.0269 12.2678 13.7144 12.6673C13.5405 12.8411 12.516 13.7617 12.4291 13.866L13.0024 13.8833C13.1932 13.7095 15.1734 11.9553 15.3643 11.7122C15.9376 11.0868 16.2675 10.2705 16.2675 9.41948V3.02756C16.2594 2.70494 16.3151 2.3839 16.4314 2.08286C16.5476 1.78182 16.7222 1.5067 16.9451 1.2733C17.1881 1.01258 17.9526 0.370101 18.0913 0.21367L17.4836 0.196289C17.3619 0.35272 15.1908 2.31524 14.9823 2.52381ZM10.1016 26.719L12.516 28.8209H14.1312C15.6769 28.8209 17.1707 28.2129 18.2651 27.1188C19.2552 26.1287 19.6199 24.7909 19.6199 23.5404V20.0841C19.6025 19.3025 19.2723 18.5555 18.682 18.0346C18.5777 17.9303 17.8657 17.2528 17.8657 17.2528V19.9102C17.8657 19.9102 18.6472 20.7095 18.7862 20.8656C19.4983 21.6301 19.4983 23.0196 17.2229 25.2255C16.8234 25.6072 15.6946 26.6842 14.1315 26.6842L10.1016 26.719Z"
                                            fill="#D71A21"
                                        />
                                        <path
                                            d="M16.8237 12.5288C16.563 12.8066 16.3026 13.5015 16.3026 14.1266V15.4293H17.6226C18.1441 15.4293 18.8213 14.9606 18.9604 14.7173V13.4143C19.1561 13.6998 19.3965 13.952 19.6724 14.1611C19.8114 13.9873 21.0272 12.5285 22.0343 12.5111C23.7194 12.4937 23.3373 14.6301 22.6597 15.3076C22.4341 15.5333 21.444 16.4365 21.1314 16.7316C20.3322 17.4961 18.96 17.1314 18.96 15.1686C18.96 15.1686 17.5013 16.5581 17.2753 16.749C17.0497 16.9402 16.3026 17.7391 16.3026 17.7391V21.1958C16.3026 22.8458 15.7641 23.4017 15.3125 23.9054C15.1387 24.0963 13.2804 25.7987 13.02 25.9896L12.4117 26.007C12.4117 26.007 13.5061 25.0169 13.7147 24.7912C13.9577 24.5305 14.2532 24.0094 14.2532 23.1409C14.2532 22.9153 14.2184 17.7217 14.2184 17.7217H5.74198C2.78935 17.7217 2.16394 14.4566 2.14656 13.5704V10.2882C2.14656 9.74968 1.79925 8.84648 1.26074 8.5687H2.09473C2.1987 8.60315 2.71983 8.81172 2.71983 10.8264C2.71983 10.8264 2.68507 13.1542 2.68507 13.293C2.68507 14.3178 3.50136 15.4814 4.66528 15.4814L14.2528 15.4641C14.2528 15.2033 14.5136 14.2309 14.9825 13.7098C15.2433 13.4146 17.3101 11.5387 17.536 11.3478H18.1437C18.0568 11.4347 17.0497 12.3202 16.8411 12.5636L16.8237 12.5288ZM19.9678 14.4913C20.2159 14.8295 20.4888 15.1489 20.7841 15.4467C21.8261 16.2803 22.3124 15.3771 21.6178 14.4392C21.3397 14.0574 20.2801 14.1614 19.9675 14.4913H19.9678Z"
                                            fill="#D71A21"
                                        />
                                        <path
                                            d="M9.68534 20.6746C9.68534 21.1433 8.20887 22.3767 8.12196 22.4462C8.01798 21.9425 7.6356 21.404 6.54152 20.2922L8.15672 18.677C9.25112 19.7714 9.68534 20.0147 9.68534 20.6746ZM12.4992 2.10687C12.8292 2.4368 13.5238 3.30524 13.1069 3.73946C12.7924 4.05609 12.4798 4.37454 12.169 4.6948C12.1342 4.48622 11.596 3.96541 11.596 3.96541V5.71967C11.5786 6.43167 11.3179 6.62287 11.3179 6.62287C11.3179 6.62287 12.6206 7.90783 12.6206 9.57549V11.2776C12.6283 11.4373 12.6029 11.5969 12.5462 11.7464C12.4894 11.8958 12.4024 12.032 12.2906 12.1464C12.169 12.2851 10.9706 13.5011 10.7794 13.6573C10.5016 13.9006 10.1543 14.0393 9.78931 14.022H5.29132C4.579 14.022 3.84961 13.4664 3.84961 12.9105C3.84961 12.7715 3.86699 11.2431 3.86699 11.2431C4.09264 11.5036 4.33566 11.8161 4.89155 11.8161C5.34315 11.8161 5.79475 11.4688 5.91642 11.3297C6.03809 11.191 9.32095 7.78647 9.32095 7.78647C9.32095 7.78647 7.79234 6.36215 6.78516 5.6849C6.29849 5.35497 5.63863 5.77181 5.53434 6.20603C5.22179 7.56083 5.53434 9.61026 5.53434 9.61026L4.30121 8.37712C3.79747 7.87338 3.81485 6.74454 4.42257 6.15389C4.50947 6.0496 5.43005 5.04211 6.57659 5.04211H8.36561C9.56398 5.04211 10.884 6.24079 10.884 6.24079C10.9883 6.11912 11.0578 5.98007 11.0752 5.82364C11.0752 5.19854 11.0578 3.54858 11.0578 3.54858C10.1546 2.64538 10.033 1.70741 10.4672 1.27319C11.2835 0.4569 11.579 0.178802 11.579 0.178802C11.579 0.178802 11.5439 1.16891 12.4992 2.10687ZM6.85407 11.1389C6.40247 11.6075 6.33294 11.7121 5.91611 11.9725H10.988C12.3602 11.9725 12.0824 11.1215 11.839 10.6873C11.3353 9.80145 9.73748 8.16855 9.73748 8.16855C9.73748 8.16855 6.94097 11.052 6.85407 11.1389Z"
                                            fill="#D71A21"
                                        />
                                        <path
                                            d="M1.06903 15.7591H0.235352C0.235352 15.7591 1.12117 16.2455 1.12117 17.5134V21.5604C1.12117 24.1831 3.29226 26.6149 5.93234 26.6149H8.13819C9.45823 26.6149 9.92721 26.302 10.7264 25.59C11.0213 25.3293 11.4037 24.8951 11.5427 24.739C11.9943 24.2175 12.4981 23.801 12.4981 22.4462V21.1262C12.4981 19.9796 11.8379 19.5107 11.508 19.1807C11.2545 18.9305 10.9998 18.6816 10.7438 18.434V21.1436C10.7438 21.1436 11.2994 21.7339 11.5427 21.9251C12.689 22.8283 11.7858 24.3917 10.7091 24.3917H5.86281C4.09118 24.4261 1.67706 22.8457 1.67706 20.1705V17.9824C1.69413 15.7591 1.06872 15.7591 1.06872 15.7591H1.06903Z"
                                            fill="#D71A21"
                                        />
                                    </svg>
                                </div>
                            </div>

                            <button className="px-4 py-3 bg-[#B9CAFF] rounded-e-[7px] ">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="7"
                                    height="12"
                                    viewBox="0 0 7 12"
                                    fill="none">
                                    <path
                                        d="M0.64808 11.2219C0.486358 11.0602 0.395508 10.8408 0.395508 10.6121C0.395508 10.3833 0.486358 10.1639 0.64808 10.0022L4.91819 5.73204L0.64808 1.46193C0.490941 1.29923 0.403991 1.08132 0.405956 0.855141C0.407922 0.628957 0.498646 0.412594 0.658588 0.252651C0.81853 0.0927086 1.03489 0.0019865 1.26108 2.09808e-05C1.48726 -0.00194454 1.70517 0.0850048 1.86787 0.242144L6.74787 5.12215C6.9096 5.28392 7.00045 5.5033 7.00045 5.73204C7.00045 5.96079 6.9096 6.18017 6.74787 6.34194L1.86787 11.2219C1.7061 11.3837 1.48672 11.4745 1.25797 11.4745C1.02923 11.4745 0.809851 11.3837 0.64808 11.2219Z"
                                        fill="#254FD4"
                                    />
                                </svg>
                            </button>
                        </div>

                        <button className="px-2 py-3 bg-white rounded-[7px] border border-[#4F4F4F] flex items-center justify-between gap-1 w-[75px] h-[36px]">
                            <p className="text-[12px]">Next</p>
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="7"
                                height="12"
                                viewBox="0 0 7 12"
                                fill="none">
                                <path
                                    d="M0.449838 11.4846C0.288116 11.3229 0.197266 11.1035 0.197266 10.8747C0.197266 10.646 0.288116 10.4266 0.449838 10.2649L4.71995 5.99474L0.449838 1.72462C0.292699 1.56193 0.205749 1.34402 0.207714 1.11784C0.20968 0.891652 0.300404 0.675289 0.460346 0.515347C0.620288 0.355404 0.836651 0.264682 1.06284 0.262716C1.28902 0.260751 1.50693 0.3477 1.66962 0.504839L6.54963 5.38485C6.71135 5.54662 6.8022 5.766 6.8022 5.99474C6.8022 6.22348 6.71135 6.44286 6.54963 6.60463L1.66962 11.4846C1.50785 11.6464 1.28847 11.7372 1.05973 11.7372C0.830987 11.7372 0.611609 11.6464 0.449838 11.4846Z"
                                    fill="#254FD4"
                                />
                            </svg>
                        </button>
                    </div>

                    <div className="bg-white shadow-sm rounded-[8px] mt-8 mb-6">
                        <div className="flex justify-between items-center px-6 py-3 rounded-t-[8px]  bg-gradient-to-r to-[#0d2c8b] from-[#164aea] ">
                            <h1 className="text-[16px] font-semibold text-white">1. Departing to Bangkok</h1>
                            <p className="text-sm text-white">*Last Updated: 22:12:25, May 24, 2024</p>
                        </div>
                        <div className="px-5 py-3 flex justify-between items-center gap-4">
                            <div>
                                <h1 className="text-[16px] font-medium text-[#222] mb-1">Nonstop First</h1>
                                <p className="text-sm text-[#0F2055] text-center">BDT 22,623</p>
                            </div>
                            <Divider
                                orientation="vertical"
                                variant="middle"
                                flexItem
                            />
                            <div>
                                <div className="relative">
                                    <h1 className="text-[16px] font-medium text-[#222] mb-1">Lowest Price</h1>
                                    <p className="text-sm text-[#0F2055] text-center">EUR {lowestPrice}</p>
                                </div>
                                {/* <span className="absolute bottom-0 left-0">
                            <svg
                                width="100"
                                height="6"
                                viewBox="0 0 123 6"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0 6C0 2.68629 2.68629 0 6 0H117C120.314 0 123 2.68629 123 6H0Z"
                                    fill="#2C5FFF"
                                />
                            </svg>
                        </span> */}
                            </div>
                            <Divider
                                orientation="vertical"
                                variant="middle"
                                flexItem
                            />
                            <div>
                                <h1 className="text-[16px] font-medium text-[#222] mb-1">Shortest Duration</h1>
                                <p className="text-sm text-[#0F2055] text-center">{shortestDuration}</p>
                            </div>
                            <Divider
                                orientation="vertical"
                                variant="middle"
                                flexItem
                            />
                            <div>
                                <span className="text-[16px] font-medium text-[#222] mr-[6px]">Sort By</span>
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="12"
                                    height="7"
                                    viewBox="0 0 12 7"
                                    fill="none">
                                    <path
                                        d="M0.252572 0.450082C0.414343 0.28836 0.633721 0.19751 0.862465 0.19751C1.09121 0.19751 1.31059 0.28836 1.47236 0.450082L5.74247 4.7202L10.0126 0.450082C10.1753 0.292943 10.3932 0.205993 10.6194 0.207958C10.8456 0.209924 11.0619 0.300648 11.2219 0.46059C11.3818 0.620532 11.4725 0.836895 11.4745 1.06308C11.4765 1.28926 11.3895 1.50717 11.2324 1.66987L6.35237 6.54988C6.1906 6.7116 5.97122 6.80245 5.74247 6.80245C5.51373 6.80245 5.29435 6.7116 5.13258 6.54988L0.252572 1.66987C0.0908503 1.5081 0 1.28872 0 1.05997C0 0.831231 0.0908503 0.611853 0.252572 0.450082Z"
                                        fill="#254FD4"
                                    />
                                </svg>
                            </div>
                            <Divider
                                orientation="vertical"
                                variant="middle"
                                flexItem
                            />
                            <button className="px-3 py-4 bg-[#254FD4] rounded-[7px]">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="14"
                                    height="13"
                                    viewBox="0 0 14 13"
                                    fill="none">
                                    <path
                                        d="M11.4648 5.42535V5.9167C11.4648 6.50636 11.6332 7.08284 11.9485 7.57342L12.7213 8.77578C13.4272 9.87396 12.8883 11.3666 11.6606 11.7139C8.44895 12.6224 5.06128 12.6224 1.84959 11.7139C0.621887 11.3666 0.0830003 9.87396 0.788886 8.77578L1.56169 7.57342C1.87706 7.08284 2.04534 6.50636 2.04534 5.9167V5.42535C2.04534 2.72754 4.15397 0.540527 6.7551 0.540527C9.3562 0.540527 11.4648 2.72754 11.4648 5.42535Z"
                                        fill="#FFFEFC"
                                    />
                                </svg>
                                <span className="ml-1.5 text-sm text-white font-semibold">Add Price Alert</span>
                            </button>
                        </div>
                    </div>

                    {data?.flight_data?.data?.length > 0 ? (
                        data?.flight_data?.data?.map((flight: any, index: number) => (
                            <FlightCard
                                key={index}
                                flight={flight}
                                getCarrierFullName={getCarrierFullName}
                            />
                        ))
                    ) : (
                        <EmptyStat title={"Flight not available"} />
                    )}
                </div>
            )}
        </>
    );
};

export default FlightList;
